<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Producer Registration</title>
  </head>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      background: linear-gradient(rgb(78, 196, 99), #6b6969);
      margin: 0;
      padding: 0;
      height: 100vh;
      width: 100vw;
    }
    main {
      padding: 0%;
      margin: 5rem;
      text-align: center;
    }
    header {
      text-align: center;
      background-color: rgba(51, 51, 51, 0.25);
      color: #000;
      padding: 20px;
    }
  </style>
  <body>
    <header>
      <h1>School Registration</h1>
      <h2>Welcome to our Database</h2>
      <button onclick="window.location.href='../index.html'">
        Back to Landing
      </button>
    </header>
    <main>
      <div class="registration">
        <form id="registerForm">
          <label for="username"
            >School Name (This will be your username):</label
          >
          <input
            type="text"
            id="username"
            name="username"
            required
          /><br /><br />
          <label for="email">Email Address:</label>
          <input type="email" id="email" name="email" required /><br /><br />
          <label for="phone">Phone Number:</label>
          <input type="text" id="phone" name="phone" required /><br /><br />
          <label for="address">Street Address:</label>
          <input type="text" id="address" name="address" required /><br /><br />
          <label for="city">City or Town:</label>
          <input type="text" id="city" name="city" required /><br /><br />
          <label for="state">State:</label>
          <select id="state" name="state">
            <option value="ME">ME</option></select
          ><br /><br />
          <label for="zip">Zip Code:</label>
          <input type="integer" id="zip" name="zip" required /><br /><br />
          <label for="county">County</label>
          <select id="county" name="county"></select
          ><br /><br />

          <input type="submit" value="Register" />
        </form>
        <div id="message"></div>
      </div>
    </main>
  </body>
</html>
<script>
  function populateCounties() {
    const maineCounties = [
      "Cumberland",
      "Franklin",
      "Piscataquis",
      "Kennebec",
      "Oxford",
      "Androscoggin",
      "Waldo",
      "Washington",
      "York",
      "Lincoln",
      "Knox",
      "Hancock",
      "Sagadahoc",
      "Somerset",
      "Aroostook",
      "Penobscot",
    ];

    const countyOption = document.getElementById("county");
    maineCounties.forEach((county) => {
      const option = document.createElement("option");
      option.value = county;
      option.textContent = county;
      countyOption.appendChild(option);
    });
  }
  window.onload = populateCounties;

  document
    .getElementById("registrationForm")
    .addEventListener("submit", function (e) {
      e.preventDefault();
      const username = document.getElementById("username").value;
      const email = document.getElementById("email").value;
      const phone = document.getElementById("phone").value;
      const address = document.getElementById("address").value;
      const city = document.getElementById("city").value;
      const state = document.getElementById("state").value;
      const zip = document.getElementById("zip").value;
      const county = document.getElementById("county").value;

      // const password = document.getElementById("password").value;

      // Create a data object to send in the request body
      const data = {
        username: username,
        email: email,
        phone: phone,
        address: address,
        city: city,
        state: state,
        zip: zip,
        county: county,
        // password: password,
      };

      // Send a POST request to the Flask API using Axios
      axiosInstance
        .post("/registerSchool", data, {
          headers: {
            "Content-Type": "application/json",
          },
        })
        .then((response) => {
          document.getElementById("message").textContent =
            response.data.message;
        })
        .catch((error) => {
          console.error("Error:", error);
          document.getElementById("message").textContent =
            error.response.data.message;
        });
    });
</script>
